<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="springframework"><meta name="keywords" content="Spring"><meta name="author" content="Jiayi Yang"><meta name="copyright" content="Jiayi Yang"><title>springframework | Blog of JiayiY</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"4U85N5WHN0","apiKey":"41907345c92be9403ed9f1eadef3f632","indexName":"dev_blog","hits":{"per_page":10},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.2.0'
} </script><meta name="generator" content="Hexo 5.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC"><span class="toc-number">1.</span> <span class="toc-text">IOC</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://i.bmp.ovh/imgs/2021/06/648ee42f65e461cd.jpg"></div><div class="author-info__name text-center">Jiayi Yang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">55</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">18</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">4</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://i.bmp.ovh/imgs/2021/06/b914bf63a6c6a1d2.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Blog of JiayiY</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">springframework</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-11</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><ol>
<li><p>项目导入IDEA</p>
<p>环境：Windows，JDK8，Gradle 6.5.1，IDEA 2020.1.3</p>
<ul>
<li><p>进入 <code>https://github.com/spring-projects/spring-framework</code>，选择版本<code>5.2.X</code>，下载zip或clone到本地；</p>
</li>
<li><p>编辑项目目录下的build.gradle，全局搜索<code>allprojects</code>，编辑其<code>repositories</code>属性，配置阿里云镜像，如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">	maven &#123; url &#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27; &#125;</span><br><span class="line">	maven&#123; url &#x27;http://maven.aliyun.com/nexus/content/repositories/jcenter&#x27;&#125;</span><br><span class="line">	mavenCentral()</span><br><span class="line">	maven &#123; url &quot;https://repo.spring.io/libs-spring-framework-build&quot; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入项目根目录下，预编译<code>spring-oxm</code>，在命令行中执行：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gradlew :spring-oxm:compileTestJava</span><br></pre></td></tr></table></figure>

<p>(需耐心等待3-5分钟左右…) 成功后打印<code>BUILD SUCCESSFUL</code></p>
</li>
<li><p>导入项目至idea；</p>
</li>
<li><p>移除<code>spring-aspects</code>模块；</p>
</li>
</ul>
<a id="more"></a>
</li>
<li><p>阅读reference文档</p>
<p>GA：General Availability，官方正式发布的稳定版本（RELEASE，Stable，Final）</p>
<p>RC：Release Candidate，发行候选版本，基本不再加入新的功能</p>
<p>Alpha：内部测试版本，bug较多，功能不全</p>
<p>Beta：公开测试版本，比Alpha晚些，还会加功能，修bug</p>
<p>M：Milestone，开发期发行版本，边开发边发行</p>
</li>
<li><p>单一职责原则</p>
</li>
<li><p>门面模式 facade pattern</p>
<p>子系统的外部与其内部的通信必须通过统一的对象进行</p>
<ul>
<li>提供一个高层次的接口，使得子系统更易于使用</li>
</ul>
</li>
<li><p>适配器模式</p>
</li>
<li><p>泛型</p>
<blockquote>
<p>让数据类型变得参数化</p>
<ul>
<li>定义泛型时，对应的数据类型是不确定的；</li>
<li>泛型方法被调用时，会指定具体类型；</li>
</ul>
<p>核心目标：解决容器类型在编译时安全检查的问题</p>
</blockquote>
<ul>
<li><p>泛型类</p>
<p><strong>泛型的参数不支持基本类型</strong></p>
<p><strong>泛型相关的信息不会进入到运行阶段</strong></p>
<blockquote>
<p>能否在泛型里面使用具备继承关系的类？不可以</p>
<p>解决办法：</p>
<ul>
<li>使用通配符 <code>?</code>，但是会使得泛型的类型检查失去意义；</li>
<li>给泛型加入上边界 <code>? extends E</code>；</li>
<li>给泛型加入下边界 <code>? super E</code>；</li>
</ul>
</blockquote>
</li>
<li><p>泛型接口</p>
</li>
<li><p>泛型方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericClassExample</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * member这个成员变量的类型为T,T的类型由外部指定</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> T member;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenericClassExample</span><span class="params">(T member)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.member = member;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">void</span> <span class="title">printArray</span><span class="params">(E[] inputArray)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (E element : inputArray) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%s&quot;</span>, element);</span><br><span class="line">            System.out.printf(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">handleSomething</span><span class="params">(T target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>泛型方法中的泛型标识符可独立于泛型类存在的，而泛型类中其他方法受制于泛型标识符的</strong></p>
</li>
<li><p>泛型字母的含义</p>
<ul>
<li>E - Element 在集合中使用，因为集合中存放的是元素；</li>
<li>T - Type Java类；</li>
<li>K - Key 键；</li>
<li>V - Value 值；</li>
<li>N - Number 数值类型；</li>
</ul>
</li>
</ul>
</li>
<li><p>Servlet原理总结</p>
<blockquote>
<p>减少Servlet的数量</p>
<p>参照SpringMVC，仅通过DispatcherServlet进行请求派发；</p>
<ul>
<li>拦截所有请求</li>
<li>解析请求</li>
<li>派发给对应的Controller里面的方法进行处理</li>
</ul>
</blockquote>
</li>
<li><p>简单工厂模式</p>
<p>定义一个工厂类，根据传入的参数值不同返回不同的实例</p>
<p>特点：被创建的实例具有共同的父类或接口</p>
<blockquote>
<p>适用场景：</p>
<ul>
<li>需要创建的对象较少；</li>
<li>客户端不关心对象的创建过程；</li>
</ul>
</blockquote>
<p>优点：可以对创建的对象进行“加工”，对客户端隐藏相关细节；</p>
<p>缺点：因创建逻辑复杂或创建对象过多而造成代码臃肿；新增、删除子类均会违反开闭原则；</p>
<blockquote>
<p>开闭原则（待补全）</p>
</blockquote>
</li>
<li><p>工厂方法模式</p>
<p>定义一个用于创建对象的接口，让子类决定实例化哪一个类</p>
<p>对类的实例化延迟到子类</p>
<p>优点：</p>
<ul>
<li>遵循开闭原则</li>
<li>对客户端隐藏对象的创建细节</li>
<li>遵循单一职责</li>
</ul>
<p>缺点：</p>
<ul>
<li>增加子类的时候“拖家带口”</li>
<li>只支持同一类产品的创建</li>
</ul>
</li>
<li><p>抽象工厂</p>
<p>提供一个创建一系列相关或相互依赖对象的接口</p>
<ul>
<li>抽象工厂模式侧重的是同一产品族</li>
<li>工厂方法模式更加侧重于同一产品等级</li>
</ul>
<blockquote>
<p>解决了工厂模式只支持生产一种产品的弊端</p>
<ul>
<li>新增一个产品族，只需要增加一个新的具体工厂，不需要修改代码；</li>
</ul>
</blockquote>
</li>
</ol>
<h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p>Spring IOC容器使用了工厂模式+反射机制</p>
<ol>
<li><p>反射：允许程序在<strong>运行时</strong>来进行自我检查并且对内部的成员进行操作</p>
<p>1）作用：</p>
<ul>
<li>在运行时判断任意一个对象所属的类；</li>
<li>在运行时获取类的对象；</li>
<li>在运行时访问Java对象的属性、方法、构造方法等；</li>
</ul>
<p>2）java.lang.reflect 类库里主要的类</p>
<ul>
<li>Field：表示类中的成员变量</li>
<li>Method：表示类中的方法</li>
<li>Constructor：表示类的构造方法</li>
<li>Array：该类提供了动态创建数组和访问数组元素的静态方法</li>
</ul>
<p>3）反射依赖的Class</p>
<p>  JVM中只有唯一一个和类相对应的Class对象来描述其类型信息。</p>
<p>4）获取Class对象的三种方式：</p>
<ul>
<li>Object -&gt; getClass()</li>
<li>任何数据类型（包括基本数据类型）都有一个“静态”的class属性</li>
<li>通过Class类的静态方法：forName(String className) （常用）</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectTarget</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        ReflectTarget reflectTarget = <span class="keyword">new</span> ReflectTarget();</span><br><span class="line">        <span class="comment">// 第一种方式获取class对象</span></span><br><span class="line">        Class reflectTargetClass1 = reflectTarget.getClass();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第二种</span></span><br><span class="line">        Class reflectTargetClass2 = ReflectTarget.class;</span><br><span class="line">        System.out.println(reflectTargetClass1 == reflectTargetClass2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第三种</span></span><br><span class="line">        Class reflectTargetClass3 = Class.forName(<span class="string">&quot;demo.reflect.ReflectTarget&quot;</span>);</span><br><span class="line">        System.out.println(reflectTargetClass2 == reflectTargetClass3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5）获取并操作构造函数</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取所有&quot;公有的&quot;的构造方法</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="keyword">public</span> Constructor&lt;?&gt;[] getConstructors() <span class="keyword">throws</span> SecurityException &#123;</span><br><span class="line">    checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> copyConstructors(privateGetDeclaredConstructors(<span class="keyword">true</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有的构造方法(包括private public default protected)</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="keyword">public</span> Constructor&lt;?&gt;[] getDeclaredConstructors() <span class="keyword">throws</span> SecurityException &#123;</span><br><span class="line">    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> copyConstructors(privateGetDeclaredConstructors(<span class="keyword">false</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取单个的&quot;公有的&quot;构造方法</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Constructor&lt;T&gt; <span class="title">getConstructor</span><span class="params">(Class&lt;?&gt;... parameterTypes)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchMethodException, SecurityException </span>&#123;</span><br><span class="line">    checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> getConstructor0(parameterTypes, Member.PUBLIC);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取某个构造方法(包括private public default protected)</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Constructor&lt;T&gt; <span class="title">getDeclaredConstructor</span><span class="params">(Class&lt;?&gt;... parameterTypes)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchMethodException, SecurityException </span>&#123;</span><br><span class="line">    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> getConstructor0(parameterTypes, Member.DECLARED);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用构造方法</span></span><br><span class="line">Constructor -&gt; newInstance(Object... initargs)</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 暴力访问(忽略掉访问修饰符)</span></span><br><span class="line">Constructor -&gt; setAccessible(<span class="keyword">true</span>)</span><br></pre></td></tr></table></figure>

<p>6）获取并操作成员变量</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取所有的&quot;公有字段&quot; 包含继承字段</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="keyword">public</span> Field[] getFields() <span class="keyword">throws</span> SecurityException &#123;</span><br><span class="line">    checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> copyFields(privateGetPublicFields(<span class="keyword">null</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有字段(包括private修饰的) 不包含继承的字段</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="keyword">public</span> Field[] getDeclaredFields() <span class="keyword">throws</span> SecurityException &#123;</span><br><span class="line">    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> copyFields(privateGetDeclaredFields(<span class="keyword">false</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取某个&quot;公有的&quot;字段 包含继承字段</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Field <span class="title">getField</span><span class="params">(String name)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchFieldException, SecurityException </span>&#123;</span><br><span class="line">    checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    Field field = getField0(name);</span><br><span class="line">    <span class="keyword">if</span> (field == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchFieldException(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> field;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取某个字段(可以是私有的) 不包括继承字段</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Field <span class="title">getDeclaredField</span><span class="params">(String name)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchFieldException, SecurityException </span>&#123;</span><br><span class="line">    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    Field field = searchFields(privateGetDeclaredFields(<span class="keyword">false</span>), name);</span><br><span class="line">    <span class="keyword">if</span> (field == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchFieldException(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> field;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置字段的值 obj:要设置的字段所在的对象 value:要为字段设置的值</span></span><br><span class="line">Field -&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(Object obj, Object value)</span></span>;</span><br></pre></td></tr></table></figure>

<p>7）获取并操作成员方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取所有的&quot;公有方法&quot; 包含了父类的方法和Object类</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="keyword">public</span> Method[] getMethods() <span class="keyword">throws</span> SecurityException &#123;</span><br><span class="line">    checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> copyMethods(privateGetPublicMethods());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有的成员方法，包括私有的，不包含继承的</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="keyword">public</span> Method[] getDeclaredMethods() <span class="keyword">throws</span> SecurityException &#123;</span><br><span class="line">    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> copyMethods(privateGetDeclaredMethods(<span class="keyword">false</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// name:方法名 Class...:形参的Class类型对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Method <span class="title">getMethod</span><span class="params">(String name, Class&lt;?&gt;... parameterTypes)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchMethodException, SecurityException </span>&#123;</span><br><span class="line">    checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    Method method = getMethod0(name, parameterTypes, <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">if</span> (method == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchMethodException(getName() + <span class="string">&quot;.&quot;</span> + name + argumentTypesToString(parameterTypes));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> method;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Method <span class="title">getDeclaredMethod</span><span class="params">(String name, Class&lt;?&gt;... parameterTypes)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchMethodException, SecurityException </span>&#123;</span><br><span class="line">    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), <span class="keyword">true</span>);</span><br><span class="line">    Method method = searchMethods(privateGetDeclaredMethods(<span class="keyword">false</span>), name, parameterTypes);</span><br><span class="line">    <span class="keyword">if</span> (method == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchMethodException(getName() + <span class="string">&quot;.&quot;</span> + name + argumentTypesToString(parameterTypes));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> method;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法 obj:要调用方法的对象 args:调用方法时传递的实参</span></span><br><span class="line">Method -&gt; <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object obj, Object... args)</span></span>;</span><br></pre></td></tr></table></figure>

<p>8）反射的获取源</p>
<ul>
<li>用XML来保存类相关的信息以供反射调用；</li>
<li>用注解来保存类相关的信息以供反射调用；</li>
</ul>
</li>
<li><p>注解：提供一种为程序元素设置元数据的方法</p>
<p>元数据是添加到程序元素如方法、字段、类和包上的额外信息。</p>
<p>1）功能</p>
<ul>
<li>作为特定的标记，用于告诉编译器一些信息；</li>
<li>编译时动态处理，如动态生成代码；</li>
<li>运行时动态处理，作为额外信息的载体，如获取注解信息；</li>
</ul>
<p>2）注解分类</p>
<ul>
<li>标准注解：Override、Deprecated、SuppressWarnings</li>
<li>元注解：@Retention、@Target、@Inherited、@Documented</li>
<li>自定义注解</li>
</ul>
<p>3）元注解</p>
<p>​    @Target：注解的作用目标</p>
<p>​    @Retention：注解的生命周期</p>
<p>​    @Documented：注解是否应当被包含在JavaDoc文档中</p>
<p>​    @Inherited：是否允许子类继承该注解</p>
</li>
<li><p>单例模式（待总结）</p>
<p>使用反射时恶汉和懒汉模式都不能保证单例，所以采取枚举解决（枚举原理待补全）</p>
</li>
<li><p>需要实现的点</p>
<ul>
<li><p>创建注解</p>
</li>
<li><p>提取标记对象 extractPackageClass</p>
<p>指定范围，获取范围内的所有类；</p>
<p>遍历所有类，获取被注解标记的类并加载进容器里；</p>
</li>
<li><p>实现容器</p>
<p>保存Class对象及其实例的载体</p>
<p>容器的加载（配置的管理与获取，获取指定范围内的Class对象，依据配置提取Class对象，连同实例一并存入容器）</p>
<p>容器的操作方式（涉及到容器的增删改查：增加、删除操作，根据Class获取对应实例，获取所有的Class和实例，通过注解来获取被注解标注的Class，通过超类获取对应的子类Class，获取容器载体保存Class的数量）</p>
</li>
<li><p>依赖注入</p>
<ul>
<li>定义相关的注解标签</li>
<li>实现创建被注解标记的成员变量实例，并将其注入到成员变量里</li>
<li>依赖注入的使用</li>
</ul>
</li>
</ul>
</li>
<li><p>Spring框架有多种作用域</p>
<p>singleton</p>
<p>prototype</p>
<p>request</p>
<p>session</p>
<p>globalsession</p>
</li>
<li><p>IOC源码学习</p>
<p>配置文件：</p>
<p>1）根据配置，生成用来描述bean的BeanDefinition，常用属性：</p>
<ul>
<li><p>作用范围scope（@Scope）</p>
</li>
<li><p>懒加载lazy-init（@Lazy）：决定Bean实例是否延迟加载</p>
</li>
<li><p>首选primary（@Primary）：设置为true的bean会是优先的实现类</p>
</li>
<li><p>factory-bean和factory-method（@Configuration和@Bean）</p>
<p><img src="/2020/07/11/springframework/BeanDefinition.png" alt="BeanDefinition"></p>
<p>GenericBeanDefinition</p>
<p>2）术语补充</p>
<p>组件扫描：自动发现应用容器中需要创建的Bean</p>
<p>自动装配：自动满足Bean之间的依赖</p>
<p>3）ApplicationContext常用容器</p>
<p>传统的基于XML配置的经典容器</p>
<ul>
<li>FileSystemXmlApplicationContext：从文件系统加载配置</li>
<li>ClassPathXmlApplicationContext：从classpath加载配置</li>
<li>XmlWebApplicationContext：用于Web应用程序的容器</li>
</ul>
<p>4）容器的初始化：refresh()</p>
<p>在已启动的情况下调用refresh()可以清除缓存，重新装载配置信息。</p>
<p>主要功能：</p>
<ul>
<li>容器初始化、配置解析</li>
<li>BeanFactoryPostProcessor和BeanPostProcessor的注册和激活</li>
<li>国际化配置</li>
<li>web内置容器的构造</li>
</ul>
<p>模板方法模式：围绕抽象类，实现通用逻辑，定义模板结构，部分逻辑由子类实现</p>
<p>作用：复用代码，反向控制</p>
<p>模式涉及的方法种类：模板方法，具体方法，钩子方法，抽象方法</p>
<p>重要类：AbstractApplicationContext</p>
<p>5）Resource ResourceLoader 容器之间的关系</p>
<p>根据资源地址自动选择正确的Resource</p>
<ul>
<li>自动识别classpath，file等资源地址前缀；</li>
<li>支持自动解析Ant风格带通配符的资源地址；</li>
</ul>
<blockquote>
<p>Ant：路径匹配表达式，用来对URI进行匹配</p>
<ul>
<li>? 匹配任何单字符；</li>
<li><code>*</code> 匹配0或者任意数量的字符；</li>
<li><code>**</code> 匹配0或者更多的目录；</li>
</ul>
</blockquote>
<p>ResourceLoader：实现不同的Resource加载策略，按需返回特定类型的Resource。</p>
<p>6）BeanDefinitionReader</p>
<ul>
<li>读取BeanDefinition</li>
<li>BeanDefinitionRegistry</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol start="7">
<li><p>总结</p>
<p>1）容器初始化主要做的事情</p>
<p><img src="/2020/07/11/springframework/1.png" alt="容器初始化主要做的事情"></p>
</li>
<li><p>场景问题</p>
<p>BeanFactory和factoryBean有什么联系和区别</p>
</li>
</ol>
<p>后置处理器PostProcessor</p>
<p>本身也是一种需要注册到容器里的bean</p>
<p>其里面的方法会在特定的时机被容器调用；</p>
<p>实现不改变容器或者bean核心逻辑的情况下对bean进行扩展；</p>
<p>对bean进行包装，影响其行为、修改bean的内容等；</p>
<p>PostProcessor种类</p>
<p>大类分为容器级别的后置处理器以及Bean级别的后置处理器</p>
<p>BeanDefinitionRegistryPostProcessor 容器级别</p>
<p>BeanFactoryPostProcessor 容器级别</p>
<p>BeanPostProcessor bean级别</p>
<p>defaultResourceLoader</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css"></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Jiayi Yang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/07/11/springframework/">http://yoursite.com/2020/07/11/springframework/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/07/13/volatile/"><i class="fa fa-chevron-left">  </i><span>volatile</span></a></div><div class="next-post pull-right"><a href="/2020/07/11/basicconcurrency/"><span>basicconcurrency</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://i.bmp.ovh/imgs/2021/06/b914bf63a6c6a1d2.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By Jiayi Yang</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/algolia.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.3" zIndex="-2" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>